{% extends 'base.html' %}

{% block title %}FitWave AI - Персональный фитнес-помощник с ИИ{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Hero Section -->
    <div class="row justify-content-center text-center mb-5 fade-in-up">
        <div class="col-lg-8">
            <div class="mb-4">
                <i class="fas fa-dumbbell fa-4x mb-3" style="background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></i>
            </div>
            <h1 class="display-4 mb-4">
                Персональный <span style="background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ИИ-тренер</span> в вашем кармане
            </h1>
            <p class="lead mb-4 text-muted">
                Анализ осанки, состава тела и персональные рекомендации на основе искусственного интеллекта.
                Достигайте своих фитнес-целей с научным подходом.
            </p>
            {% if user.is_authenticated %}
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    <a href="{% url 'dashboard' %}" class="btn btn-primary btn-lg">
                        <i class="fas fa-tachometer-alt me-2"></i>
                        Перейти в дашборд
                    </a>
                    <a href="{% url 'ai_analysis:analysis' %}" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-camera me-2"></i>
                        Начать анализ
                    </a>
                </div>
            {% else %}
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    <a href="{% url 'login' %}" class="btn btn-primary btn-lg">
                        <i class="fas fa-rocket me-2"></i>
                        Начать бесплатно
                    </a>
                    <a href="#features" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-info-circle me-2"></i>
                        Узнать больше
                    </a>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Features Section -->
    <div id="features" class="row g-4 mb-5">
        <div class="col-md-4 fade-in-up" style="animation-delay: 0.1s;">
            <div class="card h-100 text-center p-4">
                <div class="mb-3">
                    <div class="d-inline-flex align-items-center justify-content-center rounded-circle"
                         style="width: 80px; height: 80px; background: var(--gradient-primary);">
                        <i class="fas fa-eye fa-2x text-white"></i>
                    </div>
                </div>
                <h5 class="card-title">Анализ осанки</h5>
                <p class="card-text text-muted">
                    ИИ анализирует ваши фото и выявляет проблемы с осанкой: дисбаланс плеч,
                    искривления позвоночника, неправильное положение таза.
                </p>
                {% if user.is_authenticated %}
                    <a href="{% url 'ai_analysis:analysis' %}" class="btn btn-outline-primary mt-auto">
                        Попробовать сейчас
                    </a>
                {% endif %}
            </div>
        </div>

        <div class="col-md-4 fade-in-up" style="animation-delay: 0.2s;">
            <div class="card h-100 text-center p-4">
                <div class="mb-3">
                    <div class="d-inline-flex align-items-center justify-content-center rounded-circle"
                         style="width: 80px; height: 80px; background: var(--gradient-secondary);">
                        <i class="fas fa-chart-pie fa-2x text-white"></i>
                    </div>
                </div>
                <h5 class="card-title">Состав тела</h5>
                <p class="card-text text-muted">
                    Оценка процента жировой и мышечной массы, определение типа фигуры
                    и метаболических показателей на основе фотографий и измерений.
                </p>
                {% if user.is_authenticated %}
                    <a href="{% url 'ai_analysis:analysis' %}" class="btn btn-outline-success mt-auto">
                        Начать анализ
                    </a>
                {% endif %}
            </div>
        </div>

        <div class="col-md-4 fade-in-up" style="animation-delay: 0.3s;">
            <div class="card h-100 text-center p-4">
                <div class="mb-3">
                    <div class="d-inline-flex align-items-center justify-content-center rounded-circle"
                         style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--warning), var(--danger));">
                        <i class="fas fa-dumbbell fa-2x text-white"></i>
                    </div>
                </div>
                <h5 class="card-title">Персональные планы</h5>
                <p class="card-text text-muted">
                    Индивидуальные программы тренировок и рекомендации по питанию,
                    адаптированные под ваши цели и особенности тела.
                </p>
                {% if user.is_authenticated %}
                    <a href="{% url 'nutrition' %}" class="btn btn-outline-warning mt-auto">
                        Составить план
                    </a>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- How it works -->
    <div class="row justify-content-center mb-5 fade-in-up" style="animation-delay: 0.4s;">
        <div class="col-lg-10">
            <h2 class="text-center mb-5">Как это работает</h2>
            <div class="row g-4">
                <div class="col-md-3 text-center">
                    <div class="d-inline-flex align-items-center justify-content-center rounded-circle mb-3"
                         style="width: 60px; height: 60px; background: var(--gradient-primary); color: white; font-size: 1.5rem; font-weight: 700;">
                        1
                    </div>
                    <h6>Загрузите фото</h6>
                    <p class="small text-muted">Сделайте фото спереди и сзади в полный рост</p>
                </div>

                <div class="col-md-3 text-center">
                    <div class="d-inline-flex align-items-center justify-content-center rounded-circle mb-3"
                         style="width: 60px; height: 60px; background: var(--gradient-secondary); color: white; font-size: 1.5rem; font-weight: 700;">
                        2
                    </div>
                    <h6>ИИ-анализ</h6>
                    <p class="small text-muted">Алгоритмы анализируют осанку и состав тела</p>
                </div>

                <div class="col-md-3 text-center">
                    <div class="d-inline-flex align-items-center justify-content-center rounded-circle mb-3"
                         style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--warning), var(--danger)); color: white; font-size: 1.5rem; font-weight: 700;">
                        3
                    </div>
                    <h6>Получите план</h6>
                    <p class="small text-muted">Персональные рекомендации по тренировкам</p>
                </div>

                <div class="col-md-3 text-center">
                    <div class="d-inline-flex align-items-center justify-content-center rounded-circle mb-3"
                         style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--info), var(--primary)); color: white; font-size: 1.5rem; font-weight: 700;">
                        4
                    </div>
                    <h6>Отслеживайте прогресс</h6>
                    <p class="small text-muted">Мониторьте изменения и корректируйте план</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics for authenticated users -->
    {% if user.is_authenticated %}
    <div class="card mb-5 fade-in-up" style="animation-delay: 0.5s;">
        <div class="card-body text-center py-5">
            <h3 class="mb-4">Ваша статистика</h3>
            <div class="row">
                <div class="col-md-3 mb-3">
                    <div class="h2 text-primary">
                        {% if user.userprofile %}{{ user.userprofile.bmi|floatformat:1 }}{% else %}—{% endif %}
                    </div>
                    <div class="text-muted">BMI</div>
                    <div class="small">
                        {% if user.userprofile %}
                            {% if user.userprofile.bmi < 18.5 %}
                                <span class="text-info">Недостаточный</span>
                            {% elif user.userprofile.bmi < 25 %}
                                <span class="text-success">Нормальный</span>
                            {% elif user.userprofile.bmi < 30 %}
                                <span class="text-warning">Избыточный</span>
                            {% else %}
                                <span class="text-danger">Ожирение</span>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="h2 text-success">
                        {% if user.userprofile %}{{ user.userprofile.tdee }}{% else %}—{% endif %}
                    </div>
                    <div class="text-muted">TDEE ккал</div>
                    <div class="small">Суточная потребность</div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="h2 text-warning">0</div>
                    <div class="text-muted">Анализов</div>
                    <div class="small">
                        <a href="{% url 'ai_analysis:analysis' %}" class="text-decoration-none">Сделать первый</a>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="h2 text-info">0</div>
                    <div class="text-muted">Рекомендаций</div>
                    <div class="small">Активных задач</div>
                </div>
            </div>

            <hr class="my-4">

            <div class="row">
                <div class="col-md-4 mb-2">
                    <a href="{% url 'ai_analysis:analysis' %}" class="btn btn-outline-primary w-100">
                        <i class="fas fa-camera me-2"></i>Сделать анализ
                    </a>
                </div>
                <div class="col-md-4 mb-2">
                    <a href="{% url 'nutrition' %}" class="btn btn-outline-success w-100">
                        <i class="fas fa-utensils me-2"></i>Питание
                    </a>
                </div>
                <div class="col-md-4 mb-2">
                    <a href="{% url 'settings' %}" class="btn btn-outline-secondary w-100">
                        <i class="fas fa-cog me-2"></i>Настройки
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- CTA Section -->
    <div class="text-center fade-in-up" style="animation-delay: 0.6s;">
        {% if not user.is_authenticated %}
        <div class="card">
            <div class="card-body py-5">
                <h3 class="mb-3">Готовы начать свой путь к здоровью?</h3>
                <p class="text-muted mb-4">
                    Присоединяйтесь к тысячам пользователей, которые уже достигают своих фитнес-целей с FitWave AI
                </p>
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    <a href="{% url 'signup' %}" class="btn btn-primary btn-lg">
                        <i class="fas fa-user-plus me-2"></i>
                        Создать аккаунт бесплатно
                    </a>
                    <a href="{% url 'login' %}" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-sign-in-alt me-2"></i>
                        У меня есть аккаунт
                    </a>
                </div>

                <!-- Demo Info -->
                <div class="mt-4 p-3 bg-light rounded" style="background: var(--input) !important;">
                    <small class="text-muted">
                        <strong>Демо-доступ:</strong> demo@fitwave.ai / demo123456
                    </small>
                </div>
            </div>
        </div>
        {% else %}
        <div class="card">
            <div class="card-body py-5">
                <h3 class="mb-3">Начните свой первый анализ</h3>
                <p class="text-muted mb-4">
                    Загрузите фотографии и получите персональные рекомендации от ИИ за несколько минут
                </p>
                <a href="{% url 'ai_analysis:analysis' %}" class="btn btn-primary btn-lg">
                    <i class="fas fa-camera me-2"></i>
                    Сделать анализ
                </a>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Additional Features -->
    <div class="row mt-5 fade-in-up" style="animation-delay: 0.7s;">
        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="me-3">
                            <i class="fas fa-brain fa-2x text-primary"></i>
                        </div>
                        <div>
                            <h5 class="card-title mb-1">Искусственный интеллект</h5>
                            <small class="text-muted">Алгоритмы машинного обучения</small>
                        </div>
                    </div>
                    <p class="card-text">
                        Наши ИИ-модели обучены на тысячах изображений и медицинских данных для точного анализа вашего тела и создания персональных рекомендаций.
                    </p>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="me-3">
                            <i class="fas fa-shield-alt fa-2x text-success"></i>
                        </div>
                        <div>
                            <h5 class="card-title mb-1">Безопасность данных</h5>
                            <small class="text-muted">Полная конфиденциальность</small>
                        </div>
                    </div>
                    <p class="card-text">
                        Все ваши данные защищены современными методами шифрования. Мы никогда не передаем личную информацию третьим лицам.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Smooth scrolling for anchor links
    document.addEventListener('DOMContentLoaded', function() {
        const anchorLinks = document.querySelectorAll('a[href^="#"]');

        anchorLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);

                if (targetElement) {
                    e.preventDefault();
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe elements that should animate
        const animatedElements = document.querySelectorAll('.fade-in-up');
        animatedElements.forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(el);
        });
    });
</script>
{% endblock %}